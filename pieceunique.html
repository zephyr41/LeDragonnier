<!DOCTYPE html>
<html lang="fr">
   <head>
        
      <meta charset="UTF-8">
        
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
      <title>Portfolio Masonry - Le Dragonnier</title>
        
      <link href="https://fonts.googleapis.com/css2?family=Immortal:wght@400;500&display=swap" rel="stylesheet">
        
      <style>
             /* --- VARIABLES PORTFOLIO MASONRY --- */
             .portfolio-masonry {
               --primary-red: #9D0208;
               --secondary-orange: #FAA307;
               --accent-orange: #E85D04;
               --dark-text: #2c2c2c;
               --light-bg: #F8F6F3;
               --white: #ffffff;
               --font-family: 'Immortal', serif;
               --transition-smooth: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
               --gap: 24px;
               --border-radius: 20px;
               margin-top: 50px;
             }
             .container {
               max-width: 1400px;
               margin: 0 auto;
             }
             /* --- TITRE SECTION --- */
             .portfolio-title {
               font-family: var(--font-family);
               color: var(--primary-red);
               font-size: clamp(2.5rem, 4vw, 3.5rem);
               margin: 80px 0 60px 0;
               font-weight: 400;
               letter-spacing: 1px;
               position: relative;
               text-align: center;
               transition: var(--transition-smooth);
             }
             .portfolio-title::after {
               content: '';
               position: absolute;
               bottom: -20px;
               left: 50%;
               transform: translateX(-50%);
               width: 120px;
               height: 3px;
               background: linear-gradient(90deg, var(--secondary-orange) 0%, var(--accent-orange) 100%);
               transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.3s;
             }
             .portfolio-subtitle {
               text-align: center;
               color: var(--accent-orange);
               font-size: 1.1rem;
               font-style: italic;
               opacity: 0.8;
               margin-bottom: 180px;
             }
             /* --- LOADING STATE --- */
             .loading-state {
               text-align: center;
               padding: 100px 20px;
               color: var(--dark-text);
               font-size: 1.1rem;
             }
             .loading-spinner {
               display: inline-block;
               width: 40px;
               height: 40px;
               border: 3px solid rgba(157, 2, 8, 0.1);
               border-radius: 50%;
               border-top: 3px solid var(--primary-red);
               animation: spin 1s linear infinite;
               margin-bottom: 20px;
             }
             @keyframes spin {
               0% { transform: rotate(0deg); }
               100% { transform: rotate(360deg); }
             }
             /* --- MASONRY GRID --- */
             .masonry-container {
               opacity: 0;
               transform: translateY(40px);
               transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
             }
             .masonry-container.loaded {
              margin-top: 100px;
               opacity: 1;
               transform: translateY(0);
             }
             .masonry-grid {
               display: grid;
               grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
               gap: var(--gap);
               align-items: start;
             }
             /* --- CARTE PRODUIT MASONRY PREMIUM --- */
             .masonry-card {
               background: var(--white);
               border-radius: var(--border-radius);
               overflow: hidden;
               position: relative;
               cursor: pointer;
               transition: var(--transition-smooth);
               box-shadow: 
                 0 4px 20px rgba(0, 0, 0, 0.04),
                 0 1px 3px rgba(0, 0, 0, 0.02),
                 inset 0 1px 0 rgba(255, 255, 255, 0.5);
               border: 1px solid rgba(157, 2, 8, 0.04);
               text-decoration: none;
               color: inherit;
               display: block;
               break-inside: avoid;
               margin-bottom: var(--gap);
               backdrop-filter: blur(1px);
             }
             .masonry-card::before {
               content: '';
               position: absolute;
               top: 0;
               left: 0;
               right: 0;
               bottom: 0;
               background: linear-gradient(135deg, 
                 rgba(250, 163, 7, 0.02) 0%, 
                 transparent 50%,
                 rgba(157, 2, 8, 0.01) 100%);
               opacity: 0;
               transition: var(--transition-smooth);
               z-index: 1;
             }
             .masonry-card:hover {
               transform: translateY(-16px) scale(1.015);
               box-shadow: 
                 0 32px 64px rgba(0, 0, 0, 0.12),
                 0 16px 32px rgba(157, 2, 8, 0.06),
                 inset 0 1px 0 rgba(255, 255, 255, 0.6);
               border-color: rgba(250, 163, 7, 0.12);
             }
             .masonry-card:hover::before {
               opacity: 1;
             }
             /* --- IMAGES PREMIUM REDESIGN --- */
             .card-image-container {
               position: relative;
               overflow: hidden;
               background: linear-gradient(135deg, #fafafa 0%, #f0f0f0 100%);
               border-radius: var(--border-radius) var(--border-radius) 0 0;
               height: 280px; /* Hauteur fixe pour uniformit√© */
             }
             .card-image {
               width: 100%;
               height: 100%;
               object-fit: cover;
               object-position: center center;
               transition: var(--transition-smooth);
               position: relative;
               z-index: 2;
               filter: saturate(0.9) contrast(1.1);
             }
             .masonry-card:hover .card-image {
               transform: scale(1.06);
               filter: saturate(1) contrast(1.15);
             }
             /* Overlay gradient subtil pour le contraste */
             .card-image-container::after {
               content: '';
               position: absolute;
               top: 0;
               left: 0;
               right: 0;
               bottom: 0;
               background: linear-gradient(
                 135deg, 
                 rgba(157, 2, 8, 0.03) 0%, 
                 transparent 30%,
                 transparent 70%,
                 rgba(0, 0, 0, 0.05) 100%
               );
               z-index: 2;
               pointer-events: none;
             }
             /* --- BADGES & PRIX PREMIUM --- */
             .category-badge {
               position: absolute;
               top: 24px;
               left: 24px;
               background: linear-gradient(135deg, rgba(157, 2, 8, 0.95) 0%, rgba(125, 1, 6, 0.95) 100%);
               color: white;
               padding: 10px 18px;
               border-radius: 25px;
               font-size: 0.7rem;
               font-weight: 600;
               text-transform: uppercase;
               letter-spacing: 2px;
               backdrop-filter: blur(12px);
               z-index: 4;
               transition: var(--transition-smooth);
               box-shadow: 0 4px 12px rgba(157, 2, 8, 0.25);
               border: 1px solid rgba(255, 255, 255, 0.1);
             }
             .masonry-card:hover .category-badge {
               background: linear-gradient(135deg, var(--secondary-orange) 0%, var(--accent-orange) 100%);
               transform: scale(1.05) translateY(-2px);
               box-shadow: 0 8px 20px rgba(250, 163, 7, 0.3);
             }
             .price-tag {
               position: absolute;
               bottom: 24px;
               right: 24px;
               background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 246, 243, 0.95) 100%);
               color: var(--primary-red);
               padding: 12px 20px;
               border-radius: 30px;
               font-family: var(--font-family);
               font-size: 1.1rem;
               font-weight: 500;
               letter-spacing: 0.5px;
               z-index: 4;
               box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
               transition: var(--transition-smooth);
               backdrop-filter: blur(12px);
               border: 1px solid rgba(157, 2, 8, 0.1);
             }
             .masonry-card:hover .price-tag {
               transform: scale(1.08) translateY(-4px) rotate(1deg);
               background: linear-gradient(135deg, var(--secondary-orange) 0%, var(--accent-orange) 100%);
               color: white;
               box-shadow: 0 12px 32px rgba(250, 163, 7, 0.3);
             }
             /* --- CONTENU PREMIUM --- */
             .card-content {
               padding: 35px 30px 30px 30px;
               background: var(--white);
               position: relative;
               z-index: 3;
               min-height: 140px;
             }
             .product-name {
               font-family: var(--font-family);
               color: var(--primary-red);
               font-size: clamp(1.4rem, 2.5vw, 1.7rem);
               font-weight: 500;
               margin: 0 0 10px 0;
               letter-spacing: 0.8px;
               line-height: 1.2;
               text-shadow: 0 1px 2px rgba(157, 2, 8, 0.05);
             }
             .product-subtitle {
               color: var(--accent-orange);
               font-size: 0.85rem;
               font-weight: 500;
               text-transform: uppercase;
               letter-spacing: 2.5px;
               opacity: 0.85;
               margin-bottom: 18px;
               position: relative;
             }
             .product-subtitle::after {
               content: '';
               position: absolute;
               bottom: -8px;
               left: 0;
               width: 40px;
               height: 1px;
               background: linear-gradient(90deg, var(--accent-orange) 0%, transparent 100%);
               opacity: 0.4;
             }
             /* --- CTA HOVER PREMIUM --- */
             .card-cta {
               position: absolute;
               bottom: 0;
               left: 0;
               right: 0;
               background: linear-gradient(135deg, var(--primary-red) 0%, #7A0106 100%);
               color: white;
               padding: 22px 30px;
               text-align: center;
               font-size: 0.9rem;
               font-weight: 600;
               letter-spacing: 1.5px;
               text-transform: uppercase;
               transform: translateY(100%);
               opacity: 0;
               transition: var(--transition-smooth);
               z-index: 5;
               box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
             }
             .masonry-card:hover .card-cta {
               transform: translateY(0);
               opacity: 1;
             }
             .masonry-card:hover .card-content {
               transform: translateY(-22px);
             }
             /* --- EFFET BRILLANCE --- */
             .card-shine {
               position: absolute;
               top: -50%;
               left: -50%;
               width: 30%;
               height: 200%;
               background: linear-gradient(135deg, 
                 transparent 0%, 
                 rgba(255, 255, 255, 0.15) 45%, 
                 rgba(255, 255, 255, 0.3) 50%, 
                 rgba(255, 255, 255, 0.15) 55%, 
                 transparent 100%);
               transform: skewX(25deg);
               transition: left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
               z-index: 5;
               pointer-events: none;
               opacity: 0;
             }
             .masonry-card:hover .card-shine {
               left: 120%;
               opacity: 1;
             }
             /* --- RESPONSIVE MASONRY --- */
             @media (max-width: 1200px) {
               .masonry-grid {
                 grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                 gap: 20px;
               }
             }
             @media (max-width: 768px) {
               .masonry-grid {
                 grid-template-columns: 1fr;
                 gap: 16px;
               }
               .masonry-card {
                 margin-bottom: 16px;
               }
               .card-content {
                 padding: 25px;
               }
               /* Hauteurs uniformes pour premium */
               .masonry-card .card-image-container {
                 height: 240px !important;
               }
             }
             /* --- ANIMATION D'APPARITION --- */
             .masonry-card {
               animation: fadeInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
               opacity: 0;
               transform: translateY(40px);
             }
             .masonry-card:nth-child(1) { animation-delay: 0.1s; }
             .masonry-card:nth-child(2) { animation-delay: 0.2s; }
             .masonry-card:nth-child(3) { animation-delay: 0.3s; }
             .masonry-card:nth-child(4) { animation-delay: 0.4s; }
             .masonry-card:nth-child(5) { animation-delay: 0.5s; }
             .masonry-card:nth-child(6) { animation-delay: 0.6s; }
             .masonry-card:nth-child(7) { animation-delay: 0.7s; }
             .masonry-card:nth-child(8) { animation-delay: 0.8s; }
             .masonry-card:nth-child(9) { animation-delay: 0.9s; }
             .masonry-card:nth-child(10) { animation-delay: 1s; }
             @keyframes fadeInUp {
               to {
                 opacity: 1;
                 transform: translateY(0);
               }
             }
             /* --- SEPARATEUR DECORATIF --- */
             .decorative-separator {
               height: 1px;
               background: linear-gradient(90deg,
                 transparent 0%,
                 rgba(157, 2, 8, 0.2) 25%,
                 rgba(250, 163, 7, 0.4) 50%,
                 rgba(157, 2, 8, 0.2) 75%,
                 transparent 100%);
               position: relative;
               margin: 80px 0 40px 0;
             }
             .decorative-separator::before {
               content: '‚ù¶';
               position: absolute;
               top: -12px;
               left: 50%;
               transform: translateX(-50%);
               color: var(--secondary-orange);
               font-size: 1.4rem;
               background: var(--light-bg);
               padding: 0 20px;
             }
           
      </style>
   </head>
   <body>
        
      <div class="container">
             
         <div class="portfolio-masonry">
                  
            <div class="decorative-separator"></div>
                  
                  
            <h1 class="portfolio-title">Pi√®ce Unique d'exception</h1>
                  
            <p class="portfolio-subtitle">Une s√©lection de nos plus belles cr√©ations artisanales</p>
                        
            <div id="portfolio-masonry-container">
                       
               <div class="loading-state">
                            
                  <div class="loading-spinner"></div>
                            
                  <p>Chargement de nos cr√©ations d'exception...</p>
                          
               </div>
                     
            </div>
                
         </div>
           
      </div>
        <script>
             document.addEventListener('DOMContentLoaded', async function() {
               const container = document.getElementById('portfolio-masonry-container');
               
               if (!container) return;
         
               try {
                 console.log('üîç R√©cup√©ration de tous les produits puis filtrage par cat√©gorie...');
                 
                 // L'API Store ne supporte pas category_slug, on r√©cup√®re tout puis on filtre
                 const response = await fetch('/wp-json/wc/store/v1/products?per_page=50&orderby=menu_order&order=asc');
                 
                 if (!response.ok) {
                   throw new Error(`Erreur HTTP: ${response.status}`);
                 }
         
                 const products = await response.json();
                 console.log('Nombre total de produits re√ßus:', products.length);
                 
                 // Filtrage manuel pour la cat√©gorie "porfolio" (sans le 't')
                 const portfolioProducts = products.filter(product => {
                   const hasPortfolioCategory = product.categories?.some(category => 
                     category.slug === 'piece-unique' 
                   );
                   
                   if (hasPortfolioCategory) {
                     console.log(`Produit "${product.name}" appartient √† porfolio`);
                   }
                   
                   
                   return hasPortfolioCategory;
                 });
                 
                 console.log(portfolioProducts)
                 console.log(products)
                 console.log(response)
                 console.log(`üéØ ${portfolioProducts.length} produits trouv√©s dans la cat√©gorie "porfolio"`);
                 
                 // Utiliser UNIQUEMENT les produits filtr√©s
                 const finalProducts = portfolioProducts;
         
                 if (finalProducts.length === 0) {
                   container.innerHTML = `
                     <div class="loading-state">
                       <p>Aucun produit trouv√© dans la cat√©gorie "porfolio".</p>
                       <small style="opacity: 0.6; margin-top: 10px; display: block;">
                         V√©rifiez que vos produits sont bien dans la cat√©gorie "porfolio".
                       </small>
                     </div>
                   `;
                   return;
                 }
         
                 // Construction de la grille masonry
                 const masonryContainer = document.createElement('div');
                 masonryContainer.className = 'masonry-container';
                 
                 const masonryGrid = document.createElement('div');
                 masonryGrid.className = 'masonry-grid';
         
                 finalProducts.forEach((product, index) => {
                   // Cr√©ation de la carte produit
                   const card = document.createElement('a');
                   card.href = product.permalink;
                   card.className = 'masonry-card';
                   
                   // Container image
                   const imageContainer = document.createElement('div');
                   imageContainer.className = 'card-image-container';
                   
                   // Image principale
                   const img = document.createElement('img');
                   img.src = product.images[0]?.src || '';
                   img.alt = product.images[0]?.alt || product.name;
                   img.className = 'card-image';
                   
                   // Badge cat√©gorie
                   const categoryBadge = document.createElement('div');
                   categoryBadge.className = 'category-badge';
                   categoryBadge.textContent = 'Creation Unique';
                  
                   // Contenu texte
                   const cardContent = document.createElement('div');
                   cardContent.className = 'card-content';
                   
                   // Parsing du nom produit (comme dans le Bento)
                   const nomComplet = product.name;
                   const parts = nomComplet.split(' ‚Äî ');
                   const nomPrincipal = parts[0];
                   const sousTitre = parts.length > 1 ? parts[1] : '';
                   
                   const productName = document.createElement('h2');
                   productName.className = 'product-name';
                   productName.innerHTML = nomPrincipal;
                   
                   // CTA hover
                   const cardCTA = document.createElement('div');
                   cardCTA.className = 'card-cta';
                   cardCTA.innerHTML = `D√©couvrir ${nomPrincipal} ‚Üí`;
                   
                   // Effet brillance
                   const cardShine = document.createElement('div');
                   cardShine.className = 'card-shine';
                   
                   // Assemblage de la carte
                   imageContainer.appendChild(img);
                   imageContainer.appendChild(categoryBadge);
                   imageContainer.appendChild(cardShine);
                   
                   cardContent.appendChild(productName);
                   if (sousTitre) cardContent.appendChild(productSubtitle);
                   
                   card.appendChild(imageContainer);
                   card.appendChild(cardContent);
                   card.appendChild(cardCTA);
                   
                   masonryGrid.appendChild(card);
                 });
                 
                 masonryContainer.appendChild(masonryGrid);
                 
                 // Remplacement du loading par la grille
                 container.innerHTML = '';
                 container.appendChild(masonryContainer);
                 
                 // Animation d'apparition
                 setTimeout(() => {
                   masonryContainer.classList.add('loaded');
                 }, 100);
         
               } catch (error) {
                 console.error('Erreur lors du chargement du portfolio:', error);
                 container.innerHTML = `
                   <div class="loading-state">
                     <p style="color: var(--primary-red);">Erreur lors du chargement du portfolio.</p>
                     <small style="opacity: 0.6; margin-top: 10px; display: block;">
                       ${error.message}
                     </small>
                   </div>
                 `;
               }
             });
           
      </script>
   </body>
</html>